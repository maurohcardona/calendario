<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Calendario de turnos</title>

    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/main.min.css' rel='stylesheet' />
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/main.min.js'></script>

    <style>
        body {
            font-family: Arial;
            padding: 20px;
        }
        #calendar {
            max-width: 900px;
            margin: auto;
        }
    </style>
</head>
<body>

<h2>Calendario de turnos</h2>

<div id="calendar"></div>

<!-- JSON seguro -->
{{ eventos|json_script:"eventos-data" }}

<script>
document.addEventListener("DOMContentLoaded", function() {
    var calendarEl = document.getElementById("calendar");

    var eventos = JSON.parse(document.getElementById("eventos-data").textContent);

    var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: "dayGridMonth",
        events: eventos,

        dateClick: function(info) {
            const fecha = info.dateStr;  // YYYY-MM-DD
            window.location.href = "/turnos/dia/" + fecha + "/";
        }
    });

    calendar.render();
});
</script>


</body>
</html>
