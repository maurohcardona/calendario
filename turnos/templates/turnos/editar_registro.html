{% extends "base.html" %}
{% block content %}
<div style="max-width: 800px; margin: 0 auto;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <h2 style="margin: 0; font-size: 2.5rem; font-weight: 700; color: #000000;">✏️ Editar registro</h2>
        <a href="{% url 'turnos:administrar_tabla_detalle' tabla %}" style="background: linear-gradient(135deg, #c89b8f 0%, #a8867a 100%); color: #fff; padding: 0.75rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 600;">← Cancelar</a>
    </div>

    <div style="background: #ffffff; border-radius: 12px; padding: 2rem; border: 2px solid var(--accent); box-shadow: 0 4px 16px rgba(200, 155, 143, 0.2);">
        <form method="POST" style="display: flex; flex-direction: column; gap: 1.5rem;">
            {% csrf_token %}
            
            {% if tabla == 'determinaciones' or tabla == 'perfiles' %}
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Código:</label>
                    <input type="text" name="codigo" value="{{ registro.1 }}" required style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Nombre:</label>
                    <input type="text" name="nombre" value="{{ registro.2 }}" required style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Descripción:</label>
                    <textarea name="descripcion" rows="4" style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">{{ registro.3|default:"" }}</textarea>
                </div>
            {% elif tabla == 'pacientes' %}
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">DNI:</label>
                    <input type="text" name="dni" value="{{ registro.1 }}" required style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Apellido:</label>
                    <input type="text" name="apellido" value="{{ registro.2 }}" required style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Nombre:</label>
                    <input type="text" name="nombre" value="{{ registro.3 }}" required style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Fecha de Nacimiento:</label>
                    <input type="date" name="fecha_nacimiento" value="{{ registro.4|date:'Y-m-d' }}" style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Sexo:</label>
                    <select name="sexo" style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">
                        <option value="">Seleccionar...</option>
                        <option value="M" {% if registro.5 == 'M' %}selected{% endif %}>Masculino</option>
                        <option value="F" {% if registro.5 == 'F' %}selected{% endif %}>Femenino</option>
                    </select>
                </div>
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Teléfono:</label>
                    <input type="text" name="telefono" value="{{ registro.6|default:"" }}" style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Email:</label>
                    <input type="email" name="email" value="{{ registro.7|default:"" }}" style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">
                </div>
            {% elif tabla == 'medicos' %}
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Matrícula Provincial:</label>
                    <input type="number" name="matricula_provincial" value="{{ registro.1 }}" required style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Nombre y Apellido:</label>
                    <input type="text" name="nombre_apellido" value="{{ registro.2 }}" required style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">
                </div>
            {% elif tabla == 'feriados' %}
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Fecha del feriado:</label>
                    <input type="date" name="fecha" value="{{ registro.1|date:'Y-m-d' }}" required style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Descripción:</label>
                    <textarea name="descripcion" rows="3" required style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">{{ registro.2|default:"" }}</textarea>
                </div>
            {% elif tabla == 'usuarios' %}
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Usuario (username):</label>
                    <input type="text" name="username" value="{{ registro.1 }}" required style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Nueva contraseña (dejar en blanco para no cambiar):</label>
                    <input type="password" name="password" placeholder="••••••••" style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Nombre:</label>
                    <input type="text" name="first_name" value="{{ registro.2|default:"" }}" style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Apellido:</label>
                    <input type="text" name="last_name" value="{{ registro.3|default:"" }}" style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 0.5rem; font-weight: 600; color: #000;">Email:</label>
                    <input type="email" name="email" value="{{ registro.4|default:"" }}" style="width: 100%; padding: 0.75rem; border: 2px solid var(--accent); border-radius: 8px; font-size: 1rem;">
                </div>
                <div>
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" name="is_active" {% if registro.7 %}checked{% endif %} style="width: 20px; height: 20px; cursor: pointer;">
                        <span style="font-weight: 600; color: #000;">Usuario activo</span>
                    </label>
                </div>
                <div>
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" name="is_staff" {% if registro.5 %}checked{% endif %} style="width: 20px; height: 20px; cursor: pointer;">
                        <span style="font-weight: 600; color: #000;">Miembro del staff (puede acceder al admin)</span>
                    </label>
                </div>
                <div>
                    <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                        <input type="checkbox" name="is_superuser" {% if registro.6 %}checked{% endif %} style="width: 20px; height: 20px; cursor: pointer;">
                        <span style="font-weight: 600; color: #000;">Superusuario (todos los permisos)</span>
                    </label>
                </div>
            {% endif %}
            
            <button type="submit" style="background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%); color: #fff; padding: 1rem 2rem; border-radius: 8px; border: none; font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-2px)'" onmouseout="this.style.transform='translateY(0)'">
                Guardar cambios
            </button>
        </form>
    </div>
</div>
{% endblock %}
